<div class="columns">

  <img src="pages/tuts/ala_landmark.png" alt="100 minmax landmarks picked from 12ala data. Circles area is proportional to weight." class="floatleft"/>
  <h2> Selecting landmark points </h2>
  <p>
  The sketch-map calculation is expensive and its expense increases sharply with the number of points whose projections you are
  endeavoring to find simultaneously. Moreover, the iterative minimization has more chances of getting stuck in a  poor local minimum
  when the number of variables to be optimized grows larger.  It is therefore not feasible to fit projections for all the points in the trajectory
  at once. Hence, before running the sketch-map algorithm we must select a set of representative, landmark, points from the trajectory.
  There are two strategies we use to do this selection:
  </p>
  
  <ul>
  <li> Select points randomly from the trajectory - <i>with this approach there are many landmarks in the vicinity of the basins and more poorly sampled regions are less well represented </i></li>
  <li> Select points using a farthest point strategy - <i> the landmarks selected using this approach are more uniformly distributed across the whole of space which makes this approach succeptible to outliers </i></li>
  </ul> 
  
  <p>
     Both of these strategies are implemented in the <span class="code">dimlandmark</span> code. In most cases the farthest point
     sampling is the recommended strategy, as it gives a thorough representation of the available data. 
     Since it is however desirable to give more weight in the fitting to landmarks which represent densely populated regions of 
     space, <span class="code">dimlandmark</span> also allows to assign weights proportional to the density
     of samples surrounding each sample.
  </p>
   <div class="cbox">
   <div class="head" id="tut-lmark-head" onclick="safe_toggle('tut-lmark','tut-lmark-head');">
      running <span class="code">dimlandmark</span> [+-]
   </div>
   <div class="body" id="tut-lmark" style="display: block;">
      <p>
      The <span class="code">dimlandmark</span> utility allows to select a small, representative subset 
      of the high-dimensional data, so that dimensionality reduction can be performed more effectively. 
      A 
      </p>
      <div class="code" >
         dimlandmark -D 24 -n 1000 -pi 6.283185 -mode minmax -w -lowmem &lt; highd-dataset &gt; highd-landmarks
      </div>
      <p>
      As for <span class="code">dimdist</span>, <span class="code">-D</span> and <span class="code">-pi</span>
      options specify the dimensionality and the periodicity of the data. <span class="code">-mode</span> 
      chooses the selection method (<span class="code">minmax</span> stands for farthest point sampling) and
      <span class="code">-w</span> asks for weights to be generated for the points. See the --MANUAL-- page 
      for a more detailed description and other options which may apply in different cases.
      </p>
   </div>
   </div>
   <script type="text/javascript">safe_toggle('tut-lmark','tut-lmark-head');</script>
  <p>
     Both of these strategies can also be run in PLUMED
  </p>
    

     <div class="pcbox">
     <div class="head" id="tut-random+fps-head" onclick="safe_toggle('tut-random+fps','tut-random+fps-head');">
      using PLUMED for Random Selection and FPS [+-]
     </div>
      <div class="body" id="tut-random+fps" style="display: block;">
      <p>
      The <span class="code">SelectRandomFrames</span> allows user to select a small, representative subset of the high-dimensional data randomly, so that dimensionality reduction can be performed more effectively. <span class="code">USE_ALL_DATA</span> can be replaced with <span class="code">RUN=ii</span> (a number) to use datapoints only after ii steps while selecting randomly from the data.
      </p>
      <div class="code" >
         d: READ FILE=highd-dataset.in VALUES=c.*<br>
         OUTPUT_LANDMARKS ... <br>
          ARG=d.*<br>
          USE_ALL_DATA<br>
          METRIC=EUCLIDEAN<br>
          LANDMARKS={RANDOM N=300 SEED=-3241 }<br>
          LIST_FILE=landmark-random.out<br>
          ... OUTPUT_LANDMARKS<br>
      </div>
      <p>
      <span class="code">METRIC</span>  options specify the distance function employed,  <span class="code">RANDOM</span> keyword is used to specify the Random Sampling method to be employed and  <span class="code">N</span>  is used for the number of landmarks to be selected. <span class="code">LIST_FILE</span> is used to specify the output file where the landmarks are generated. <span class="code">SEED</span> specifies the seed for the random number generator. It should be given different values for different runs. You can download the example file, the plumed input file and the script to prepare the input file <a href='data/sketchmap-0.2.tar.bz2'> as a tarball</a>.
      </p>

      <p>
      The <span class="code">FarthestPointSampling</span> allows user to select a small, representative subset of the high-dimensional data using Farthest Point Sampling technique. All the parameters remain same as defined in Random Sampling method except the key word <span class="code">FPS</span> is used instead of <span class="code">RANDOM</span>
      </p>
      <div class="code" >
         d: READ FILE=highd-dataset.in VALUES=c.*<br>
         OUTPUT_LANDMARKS ... <br>
          ARG=d.*<br>
          USE_ALL_DATA<br>
          METRIC=EUCLIDEAN<br>
          LANDMARKS={FPS N=300 SEED=1 }<br>
          LIST_FILE=landmark-fps.out<br>
          ... OUTPUT_LANDMARKS<br>
      </div>

      </div> 
      </div>
      <script type="text/javascript">safe_toggle('tut-random+fps','tut-random+fps-head');</script> 
  <p>
     Apart from the above mentioned strategies, there are some more strategies which can be used to select the landmarks when running the sketchmap algorithm with PLUMED.
  </p>
  <ul>
  <li> Select points using stride - <i>the landmarks are selected after skipping uniform number of frames between two selections. The algorithm calculates the uniform stride length with the number of required landmarks and the total data.</i> </li>
  <li> Select points using a staged sampling from the trajectory - <i>the landmarks are selected in two stages. First a relatively larger number of intermediate landmarks are selected, using farthest point sampling. After this these landmarks are used to calculate voronoi weights and random sampling is done based on the weights in each voronoi region and final selection is made.</i></li>
  </ul> 
  
  

     <div class="pcbox">
     <div class="head" id="tut-stride-head" onclick="safe_toggle('tut-stride','tut-stride-head');">
      using PLUMED for Selection with Stride and Staged Sampling [+-]
     </div>
      <div class="body" id="tut-stride" style="display: block;">
      <p>
      The Stride Sampling allows user to select a representative subset of the high-dimensional data using strides of predefined constant step length. 
      </p>
      <div class="code" >
         d: READ FILE=highd-dataset.in VALUES=c.*<br>
         OUTPUT_LANDMARKS ... <br>
          ARG=d.*<br>
          USE_ALL_DATA<br>
          METRIC=EUCLIDEAN<br>
          LANDMARKS={STRIDE N=300 }<br>
          LIST_FILE=landmark-stride.out<br>
          ... OUTPUT_LANDMARKS<br>
      </div>
      <p>
        <!-- You can download the example file, the plumed input file and the script to prepare the input file <a href='data/sketchmap-0.2.tar.bz2'> as a tarball</a>. -->
      </p>  
      <p>
      The <span class="code">StagedSampling</span> allows user to select a representative subset of the high-dimensional data using Staged Sampling technique. All the parameters remain same as defined in Random Sampling method except the key word <span class="code">STAGED</span> is used and another parameter <span class="code">GAMMA</span> is specified which determines TODO.
      </p>
      <div class="code" >
         d: READ FILE=highd-dataset.in VALUES=c.*<br>
         OUTPUT_LANDMARKS ... <br>
          ARG=d.*<br>
          USE_ALL_DATA<br>
          METRIC=EUCLIDEAN<br>
          LANDMARKS={STAGED N=300 SEED=1 GAMMA=0.5}<br>
          LIST_FILE=landmark-staged.out<br>
          ... OUTPUT_LANDMARKS<br>
      </div>
      <p>
        <!-- You can download the example file, the plumed input file and the script to prepare the input file <a href='data/sketchmap-0.2.tar.bz2'> as a tarball</a>. -->
      </p>                  
     </div>
     </div>
     <script type="text/javascript">safe_toggle('tut-stride','tut-stride-head');</script>
  
</div>
